# Generate the CVA function

icestack integrates a set of CSS -based CVA functions to generate

## What is cva (class-variance-authority)?

The CVA function is an excellent atomic tool function, please refer to https://cva.style/docs

## How to generate?

Our functions as an example. A `cva` function consists of 4 parts: `base`,`variants`,`compoundVariants`,`defaultVariants`

```js
import { cva } from 'class-variance-authority'
//                     ⬇️ base
const button = cva(['font-semibold', 'border', 'rounded'], {
  // ⬇️ variants
  variants: {
    intent: {
      primary: ['bg-blue-500', 'text-white', 'border-transparent', 'hover:bg-blue-600'],
      secondary: ['bg-white', 'text-gray-800', 'border-gray-400', 'hover:bg-gray-100']
    },
    size: {
      small: ['text-sm', 'py-1', 'px-2'],
      medium: ['text-base', 'py-2', 'px-4']
    }
  },
  // ⬇️ compoundVariants
  compoundVariants: [
    {
      intent: 'primary',
      size: 'medium',
      class: 'uppercase'
    }
  ],
  // ⬇️ defaultVariants
  defaultVariants: {
    intent: 'primary',
    size: 'medium'
  }
})

button()
// => "font-semibold border rounded bg-blue-500 text-white border-transparent hover:bg-blue-600 text-base py-2 px-4 uppercase"

button({ intent: 'secondary', size: 'small' })
// => "font-semibold border rounded bg-white text-gray-800 border-gray-400 hover:bg-gray-100 text-sm py-1 px-2"
```

## Writing

> You can use the `js` variables to dynamically generate functions

for example `type="primary"` is called `query`, `["shadow-sm"]` is called `params`

> The same `query` will be merged with `params` together

> Note ⚠ ️: If you use `scss`, you can use the `//` below for comment, otherwise please use`/* */`

```scss
.btn {
  // @b
}
.btn-primary {
  // @v type="primary"
}
.btn-xs {
  // @v size="xs"
}
.uppercase {
  // @cv type="primary" size="xs"
}

// @dv type="primary"

// @gb ["rounded"]
// @gv type="primary" ["shadow-sm"]
// @gcv type="primary" size="xs" ["p-1"]
```

will generate:

```js
//                 ⬇️ @b and @gb
const index = cva(['btn', 'rounded'], {
  // ⬇️ variants
  variants: {
    type: {
      primary: ['btn-primary', 'shadow-sm']
    },
    size: {
      xs: ['btn-xs']
    }
  },
  // ⬇️ compoundVariants
  compoundVariants: [
    {
      type: 'primary',
      size: 'xs',
      class: ['uppercase', 'p-1']
    }
  ],
  // ⬇️ defaultVariants
  defaultVariants: {
    type: 'primary'
  }
})
```

## References

| keyword | param              | type   | description                                   |
| ------- | ------------------ | ------ | --------------------------------------------- |
| `@b`    | `base`             | node   | add current node selector to base             |
| `@v`    | `variants`         | node   | add current node selector to variants         |
| `@cv`   | `compoundVariants` | node   | add current node selector to compoundVariants |
| `@dv`   | `defaultVariants`  | global | define defaultVariants                        |
| `@gb`   | `base`             | global | define base                                   |
| `@gv`   | `variants`         | global | define variants                               |
| `@gcv`  | `compoundVariants` | global | define defaultVariants                        |
