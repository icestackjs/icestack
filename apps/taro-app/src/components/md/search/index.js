"use strict";function t(t){t.search=function(e,n){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"background-color:yellow",a={},o=[],i=[];return function t(l,h){for(var r=0;r<l.length;r++){var s=l[r];if("text"===s.type&&e){var d=s.text.split(e),g=[];if(d.length>1){for(var p=0;p<d.length;p++)d[p]&&g.push({type:"text",text:d[p]}),p!==d.length-1&&(i.push("".concat(h,"[").concat(r,"].children[").concat(g.length,"].attrs.style")),g.push({name:"span",attrs:{id:n?"search"+i.length:void 0,style:c},children:[{type:"text",text:e instanceof RegExp?e.exec(s.text)[0]:e}]}));if(e instanceof RegExp&&e.exec(s.text),n)for(var f=o.length;f--&&!o[f].c;)a[o[f].path]=1;a["".concat(h,"[").concat(r,"]")]={name:"span",c:n?1:void 0,s:1,children:g}}}else if(s.s){for(var u="",x=0;x<s.children.length;x++){var v=s.children[x];v.text?u+=v.text:u+=v.children[0].text}l[r]={type:"text",text:u},e&&(e instanceof RegExp?e.test(u):u.includes(e))?r--:a["".concat(h,"[").concat(r,"]")]=l[r]}else s.children&&(o.push({path:"".concat(h,"[").concat(r,"].c"),c:s.c||"table"===s.name}),t(s.children,"".concat(h,"[").concat(r,"].children")),o.pop())}}(t.data.nodes,"nodes"),new Promise(function(e){t.setData(a,function(){e({num:i.length,highlight:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"background-color:#FF9632";if(!(e<1||e>i.length)){var a={};this.last&&(a[i[this.last-1]]=c),this.last=e,a[i[e-1]]=n,t.setData(a)}},jump:n?function(e,n){e>0&&e<=i.length&&t.navigateTo("search"+e,n)}:void 0})})})}}module.exports=t;